import{g as a}from"./api.266c9273.js";import{g as l,f as e,d as i,j as s,a4 as u,a5 as t,$ as n,o as c,c as d,C as r,a as o,x as v,a6 as p}from"./vendor.5044e5b6.js";function h(a){var l=Number(a.split(":")[1]);return(60*Number(a.split(":")[0])+l).toFixed(3)}var m=i({setup:async()=>{s((()=>{}));let{handleChangeMusic:i,index:u,obj:t,music:n}=await async function(){let i=await a(2,"",{}),s=l({value:i.data.data}),u=e(s.value.url.split("?id=")[1]),t=(await a(3,"",{type:"lyric",id:u.value})).data.lrc.lyric.split("\n"),n=l({data:[]});t.forEach((a=>{let l=h(a.split("]")[0].slice(1)),e=a.split("]")[1];n.data.push({text:e,time:l})}));let c=e(0);return{handleChangeMusic:function(){c.value=0,n.data=[],a(2,"",{}).then((l=>{s.value=l.data.data,u.value=s.value.url.split("?id=")[1],console.log(u),a(3,"",{type:"lyric",id:u.value}).then((a=>{t=a.data.lrc.lyric.split("\n"),t.forEach((a=>{let l=h(a.split("]")[0].slice(1)),e=a.split("]")[1];n.data.push({text:e,time:l})}))}))}))},index:c,obj:n,music:s}}(),c=e(),d=e(!1),r=t.data&&t.data[0].text?e(t.data[0].text):e(" ");return{msg:r,isMusicPlay:d,index:u,obj:t,audio:c,music:n,handlePlay:function(){d.value=!1},handlePause:function(){d.value=!0},handleMusicPlay:function(){c.value.paused?c.value.play():c.value.pause()},handleMusicTimeChange:function(){c.value.currentTime>=t.data[u.value+1].time&&u.value++,r.value=t.data[u.value].text,c.value.ended&&i()},handleChangeMusic:i}}});const g=p();u("data-v-4ec137cd");const y={class:"bg"},f={class:"content"},M={class:"container"},P={class:"title"},b={class:"lyric"},x={class:"icon"},C=o("br",null,null,-1);t();const j=g(((a,l,e,i,s,u)=>{const t=n("loading");return c(),d("div",y,[r(o("div",{class:"bg-img",style:`background-image:url(${a.music.value.picurl})`},null,4),[[t,!a.music.value.picurl.length]]),o("div",f,[o("div",M,[r(o("div",{class:"pic",style:`background-image:url("https:${a.music.value.picurl.split(":")[1]}`},null,4),[[t,!a.music.value.picurl.length]])]),r(o("audio",{class:"audio",ref:"audio",autoplay:!0,onPause:l[1]||(l[1]=(...l)=>a.handlePause&&a.handlePause(...l)),onPlay:l[2]||(l[2]=(...l)=>a.handlePlay&&a.handlePlay(...l)),onTimeupdate:l[3]||(l[3]=(...l)=>a.handleMusicTimeChange&&a.handleMusicTimeChange(...l)),src:a.music.value.url},null,40,["src"]),[[t,!a.music.value.picurl.length]]),o("div",P,[o("p",null,v(a.music.value.name),1),o("p",null,"歌手："+v(a.music.value.artistsname),1)]),o("p",b,v(a.msg?a.msg:" "),1),o("div",x,[o("i",{class:[a.isMusicPlay?"el-icon-video-play":"el-icon-video-pause",""],onClick:l[4]||(l[4]=(...l)=>a.handleMusicPlay&&a.handleMusicPlay(...l))},null,2),o("i",{class:"el-icon-refresh",onClick:l[5]||(l[5]=(...l)=>a.handleChangeMusic&&a.handleChangeMusic(...l))})]),C])])}));m.render=j,m.__scopeId="data-v-4ec137cd";export default m;
