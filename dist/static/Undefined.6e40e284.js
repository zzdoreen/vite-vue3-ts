import{g as a}from"./api.538ba6c3.js";import{g as l,f as e,d as i,j as s,a4 as u,a5 as c,o as n,c as t,a as d,x as r,a6 as o}from"./vendor.5044e5b6.js";function v(a){var l=Number(a.split(":")[1]);return(60*Number(a.split(":")[0])+l).toFixed(3)}var h=i({setup:async()=>{s((()=>{}));let{handleChangeMusic:i,index:u,obj:c,music:n,music_lyric:t}=await async function(){let i=await a(2,"",{}),s=l({value:i.data.data}),u=e(s.value.url.split("?id=")[1]),c=(await a(3,"",{type:"lyric",id:u.value})).data.lrc.lyric.split("\n"),n=[];c.forEach((a=>{let l=v(a.split("]")[0].slice(1)),e=a.split("]")[1];n.push({text:e,time:l})}));let t=l({lyric:n}),d=e(0);return{handleChangeMusic:function(){d.value=0,a(2,"",{}).then((l=>{s.value=l.data.data,u.value=s.value.url.split("?id=")[1],console.log(u),a(3,"",{type:"lyric",id:u.value}).then((a=>{c=a.data.lrc.lyric.split("\n"),n=[],c.forEach((a=>{let l=v(a.split("]")[0].slice(1)),e=a.split("]")[1];n.push({text:e,time:l})})),t.lyric=n,console.log(n)}))}))},index:d,obj:n,music:s,music_lyric:t}}(),d=e(),r=e(!1),o=e(c[0].text);return{msg:o,isMusicPlay:r,index:u,obj:c,audio:d,music:n,music_lyric:t,handlePlay:function(){r.value=!1},handlePause:function(){r.value=!0},handleMusicPlay:function(){d.value.paused?d.value.play():d.value.pause()},handleMusicTimeChange:function(){d.value.currentTime>=c[u.value+1].time&&u.value++,o.value=c[u.value].text},handleChangeMusic:i}}});const m=o();u("data-v-66315369");const p={class:"bg"},y={class:"content"},g={class:"title"},f={class:"container"},M={class:"icon"},P=d("br",null,null,-1),b={class:"lyric"};c();const x=m(((a,l,e,i,s,u)=>(n(),t("div",p,[d("div",{class:"bg-img",style:`background-image:url(${a.music.value.picurl})`},null,4),d("div",y,[d("h1",g,r(a.music.value.artistsname)+":"+r(a.music.value.name),1),d("div",f,[d("img",{src:a.music.value.picurl,class:"pic",alt:"",srcset:""},null,8,["src"])]),d("audio",{class:"audio",ref:"audio",autoplay:!0,onPause:l[1]||(l[1]=(...l)=>a.handlePause&&a.handlePause(...l)),onPlay:l[2]||(l[2]=(...l)=>a.handlePlay&&a.handlePlay(...l)),onTimeupdate:l[3]||(l[3]=(...l)=>a.handleMusicTimeChange&&a.handleMusicTimeChange(...l)),src:a.music.value.url},null,40,["src"]),d("div",M,[d("i",{class:[a.isMusicPlay?"el-icon-video-play":"el-icon-video-pause",""],onClick:l[4]||(l[4]=(...l)=>a.handleMusicPlay&&a.handleMusicPlay(...l))},null,2),d("i",{class:"el-icon-refresh",onClick:l[5]||(l[5]=(...l)=>a.handleChangeMusic&&a.handleChangeMusic(...l))})]),P,d("p",b,r(a.msg),1)])]))));h.render=x,h.__scopeId="data-v-66315369";export default h;
